# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2020, BandCamp
# This file is distributed under the same license as the istio-docs package.
# FIRST AUTHOR <EMAIL@ADDRESS>, 2020.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: istio-docs \n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2020-03-22 10:08+0800\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Generated-By: Babel 2.7.0\n"

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:2
msgid "ist0113"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:4
msgid ""
"This message occurs when a destination rule resource and a policy "
"resource are in conflict with regards to mutual TLS. The two resources "
"are in conflict if they each specify incompatible mutual TLS modes to be "
"used; this conflict means traffic matching the destination rule to the "
"specified host will be rejected."
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:10
msgid ""
"This message is only produced on service meshes that are not using "
"`automatic mutual TLS </docs/tasks/security/authentication/auto-mtls/>`_."
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:15
msgid "An example"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:17
msgid "Consider an Istio mesh with the following mesh policy:"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:22
msgid "MeshPolicy metadata: name: default spec: peers: - mtls: {}"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:24
msgid ""
"The effect of this policy resource is that all services have an "
"authentication policy requiring mutual TLS to be used. However, note that"
" without a corresponding destination rule requiring traffic to use mutual"
" TLS, traffic will be sent to services without using mutual TLS. This "
"conflict means that traffic destined for services in the mesh will "
"ultimately fail."
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:31
msgid ""
"In this example, you can fix the issue in one of two ways: you could "
"downgrade the mesh policy’s mutual TLS requirements to accept plaintext "
"traffic (which might include removing the mesh policy entirely), or you "
"can create a corresponding destination rule that specifies to use mutual "
"TLS for traffic within the mesh:"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:40
msgid ""
"DestinationRule metadata: name: mtls-for-cluster spec: host: "
"\\*.svc.cluster.local trafficPolicy: tls: mode: ISTIO_MUTUAL {{< /text "
">}}"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:45
msgid "Which destination rules and policies are relevant to a service"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:47
msgid ""
"To effectively resolve mutual TLS conflicts, it’s helpful to understand "
"how both destination rules and policies affect traffic to a service. "
"Consider an example service named ``my-service`` in namespace ``my-"
"namespace``. To determine which policy object is applied to ``my-"
"service``, the following resources are matched in order:"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:53
msgid ""
"A policy resource in namespace ``my-namespace`` that contains a "
"``target`` specifying ``my-service``."
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:55
msgid ""
"A policy resource named ``default`` in namespace ``my-namespace`` that "
"does not contain a ``target``. This policy implicitly applies to the "
"entire namespace."
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:58
msgid "A mesh policy resource named ``default``."
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:60
msgid ""
"To determine which destination rules are applied to traffic sent to ``my-"
"service``, we must first know which namespace the traffic originates "
"from. For the sake of this example, let’s call that namespace ``other-"
"namespace``. Destination rules are matched in the following order:"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:66
msgid ""
"A destination rule in namespace ``other-namespace`` that specifies a host"
" that matches ``my-service.my-namespace.svc.cluster.local``. This may be "
"an exact match or a wildcard match. Also note that the ``exportTo`` "
"field, which controls the visibility of configuration resources, will "
"effectively be ignored as resources within the same namespace as the "
"source service are always visible."
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:72
msgid ""
"A destination rule in namespace ``my-namespace`` that specifies a host "
"that matches ``my-service.my-namespace.svc.cluster.local``. This may be "
"an exact match or a wildcard match. Note that the ``exportTo`` field must"
" specify that this resource is public (e.g. it has the value ``\"*\"`` or"
" is not specified) in order for a match to occur."
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:77
msgid ""
"A destination rule in the “root namespace” (which is, by default, "
"``istio-system``) that matches ``my-service.my-"
"namespace.svc.cluster.local``. The root namespace is controlled by the "
"``rootNamespace`` property in the `MeshConfig resource "
"</docs/reference/config/istio.mesh.v1alpha1/#MeshConfig>`_. Note that the"
" ``exportTo`` field must specify that this resource is public (e.g. it "
"has the value ``\"*\"`` or is not specified) in order for a match to "
"occur."
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:86
msgid ""
"Finally, be aware that Istio doesn’t apply any concept of inheritance "
"when following these rules. The first resources that matches the "
"specified criteria is used."
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:91
msgid "How to resolve"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:93
msgid "Look at the output of the message. You should see something like:"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:95
msgid ""
"{{< text plain >}} Error [IST0113] (DestinationRule default-rule.istio-"
"system) A DestinationRule and Policy are in conflict with regards to mTLS"
" for host myhost.my-namespace.svc.cluster.local:8080. The DestinationRule"
" “istio-system/default-rule” specifies that mTLS must be true but the "
"Policy object “my-namespace/my-policy” specifies Plaintext. {{< /text >}}"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:103
msgid "Contained in this message are the two resources that are in conflict:"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:105
msgid ""
"Policy resource ``my-namespace/my-policy``, which is specifying "
"‘Plaintext’ as its supported mutual TLS mode."
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:107
msgid ""
"Destination rule resource ``istio-system/default-rule``, which is "
"requiring mutual TLS when sending traffic to host ``myhost.my-"
"namespace.svc.cluster.local:8080``"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:111
msgid "You can fix the conflict by doing one of the following:"
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:113
msgid ""
"Modifying policy resource ``my-namespace/my-policy`` to require mutual "
"TLS as an authentication mode. In general this is done by adding a "
"``peers`` attribute to the resource with a child of ``mtls``. You can "
"read more about how this is achieved on the `reference page for policy "
"objects "
"</docs/reference/config/security/istio.authentication.v1alpha1/#Policy>`_."
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:119
msgid ""
"Modifying destination rule ``istio-system/default-rule`` to not use "
"mutual TLS by removing the ``ISTIO_MUTUAL`` traffic policy. Note that "
"``default-rule`` is in the ``istio-system`` namespace - by default, the "
"``istio-system`` namespace is considered the “root namespace” for "
"configuration (although this can be overridden via the ``rootNamespace`` "
"property in the `MeshConfig resource "
"</docs/reference/config/istio.mesh.v1alpha1/#MeshConfig>`_. That means "
"that this destination rule potentially affects all other services in the "
"mesh."
msgstr ""

#: ../../source/docs/reference/config/analysis/ist0113/index.rst:128
msgid ""
"Add a new destination rule in the same namespace as the service (in this "
"case, namespace ``my-namespace``), and do not specify a traffic policy of"
" ``ISTIO_MUTUAL``. Because this rule is located in the same namespace as "
"the service, it will override the global destination rule ``istio-system"
"/default-rule``."
msgstr ""

