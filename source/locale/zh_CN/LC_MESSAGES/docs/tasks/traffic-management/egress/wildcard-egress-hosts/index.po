# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2020, BandCamp
# This file is distributed under the same license as the istio-docs package.
# FIRST AUTHOR <EMAIL@ADDRESS>, 2020.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: istio-docs \n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2020-03-22 10:08+0800\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Generated-By: Babel 2.7.0\n"

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:2
msgid "Egress using Wildcard Hosts"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:4
msgid ""
"The `Control Egress Traffic </docs/tasks/traffic-management/egress/>`_ "
"task and the `Configure an Egress Gateway </docs/tasks/traffic-"
"management/egress/egress-gateway/>`_ example describe how to configure "
"egress traffic for specific hostnames, like ``edition.cnn.com``. This "
"example shows how to enable egress traffic for a set of hosts in a common"
" domain, for example ``*.wikipedia.org``, instead of configuring each and"
" every host separately."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:14
msgid "Background"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:16
msgid ""
"Suppose you want to enable egress traffic in Istio for the "
"``wikipedia.org`` sites in all languages. Each version of "
"``wikipedia.org`` in a particular language has its own hostname, e.g., "
"``en.wikipedia.org`` and ``de.wikipedia.org`` in the English and the "
"German languages, respectively. You want to enable egress traffic by "
"common configuration items for all the Wikipedia sites, without the need "
"to specify every language’s site separately."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:24
msgid "{{< boilerplate before-you-begin-egress >}}"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:26
msgid ""
"`Deploy Istio egress gateway </docs/tasks/traffic-management/egress"
"/egress-gateway/#deploy-istio-egress-gateway>`_."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:29
msgid ""
"`Enable Envoy’s access logging </docs/tasks/observability/logs/access-log"
"/#enable-envoy-s-access-logging>`_"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:33
msgid "Configure direct traffic to a wildcard host"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:35
msgid ""
"The first, and simplest, way to access a set of hosts within a common "
"domain is by configuring a simple ``ServiceEntry`` with a wildcard host "
"and calling the services directly from the sidecar. When calling services"
" directly (i.e., not via an egress gateway), the configuration for a "
"wildcard host is no different than that of any other (e.g., fully "
"qualified) host, only much more convenient when there are many hosts "
"within the common domain."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:43
msgid ""
"Define a ``ServiceEntry`` and corresponding ``VirtualSevice`` for "
"``*.wikipedia.org``:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:49
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:455
msgid ""
"networking.istio.io/v1alpha3 kind: ServiceEntry metadata: name: wikipedia"
" spec: hosts:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:52
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:458
msgid "\"*.wikipedia.org\" ports:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:53
msgid ""
"number: 443 name: tls protocol: TLS — apiVersion: "
"networking.istio.io/v1alpha3 kind: VirtualService metadata: name: "
"wikipedia spec: hosts:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:56
msgid "\"*.wikipedia.org\" tls:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:57
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:180
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:191
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:506
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:517
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:576
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:587
msgid "match:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:59
msgid "port: 443 sni_hosts:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:61
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:185
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:196
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:511
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:581
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:592
msgid "\"*.wikipedia.org\" route:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:63
msgid "destination: host: \"*.wikipedia.org\" port: number: 443 EOF"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:65
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:214
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:601
msgid ""
"Send HTTPS requests to https://en.wikipedia.org and "
"https://de.wikipedia.org:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:71
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:220
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:607
msgid "’curl -s https://en.wikipedia.org/wiki/Main_Page \\| grep -o \""
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:77
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:90
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:226
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:239
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:613
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:626
msgid ".\\*"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:83
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:232
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:619
msgid "“; curl -s https://de.wikipedia.org/wiki/Wikipedia:Hauptseite \\| grep -o”"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:96
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:245
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:632
msgid "\"’"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:102
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:251
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:638
msgid "Wikipedia, the free encyclopedia"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:112
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:261
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:648
msgid "Wikipedia – Die freie Enzyklopädie"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:121
msgid "Cleanup direct traffic to a wildcard host"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:126
msgid "delete virtualservice wikipedia"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:129
msgid "Configure egress gateway traffic to a wildcard host"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:131
msgid ""
"The configuration for accessing a wildcard host via an egress gateway "
"depends on whether or not the set of wildcard domains are served by a "
"single common host. This is the case for \\_*.wikipedia.org_. All of the "
"language-specific sites are served by every one of the *wikipedia.org* "
"servers. You can route the traffic to an IP of any \\_*.wikipedia.org\\_ "
"site, including *www.wikipedia.org*, and it will `manage to serve "
"<https://en.wikipedia.org/wiki/Virtual_hosting>`_ any specific site."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:140
msgid ""
"In the general case, where all the domain names of a wildcard are not "
"served by a single hosting server, a more complex configuration is "
"required."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:145
msgid "Wildcard configuration for a single hosting server"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:147
msgid ""
"When all wildcard hosts are served by a single server, the configuration "
"for egress gateway-based access to a wildcard host is very similar to "
"that of any host, with one exception: the configured route destination "
"will not be the same as the configured host, i.e., the wildcard. It will "
"instead be configured with the host of the single server for the set of "
"domains."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:154
msgid ""
"Create an egress ``Gateway`` for \\_*.wikipedia.org_, a destination rule "
"and a virtual service to direct the traffic through the egress gateway "
"and from the egress gateway to the external service."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:161
msgid ""
"networking.istio.io/v1alpha3 kind: Gateway metadata: name: istio-"
"egressgateway spec: selector: istio: egressgateway servers:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:164
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:559
msgid "port: number: 443 name: tls protocol: TLS hosts:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:166
msgid ""
"\"*.wikipedia.org\" tls: mode: PASSTHROUGH — apiVersion: "
"networking.istio.io/v1alpha3 kind: DestinationRule metadata: name: "
"egressgateway-for-wikipedia spec: host: istio-egressgateway.istio-"
"system.svc.cluster.local subsets:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst
msgid "name: wikipedia"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:173
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:569
msgid ""
"apiVersion: networking.istio.io/v1alpha3 kind: VirtualService metadata: "
"name: direct-wikipedia-through-egress-gateway spec: hosts:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:177
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:503
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:573
msgid "\"*.wikipedia.org\" gateways:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:178
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:504
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:574
msgid "mesh"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:179
msgid "istio-egressgateway tls:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:182
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:193
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:508
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:519
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:578
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:589
msgid "gateways:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:184
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:510
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:580
msgid "mesh port: 443 sni_hosts:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:187
msgid ""
"destination: host: istio-egressgateway.istio-system.svc.cluster.local "
"subset: wikipedia port: number: 443 weight: 100"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:195
msgid "istio-egressgateway port: 443 sni_hosts:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:198
msgid "destination: host: www.wikipedia.org port: number: 443 weight: 100 EOF"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:201
msgid "Create a ``ServiceEntry`` for the destination server, *www.wikipedia.org*."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:207
msgid ""
"networking.istio.io/v1alpha3 kind: ServiceEntry metadata: name: www-"
"wikipedia spec: hosts:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:210
msgid "www.wikipedia.org ports:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:211
msgid "number: 443 name: tls protocol: TLS resolution: DNS EOF {{< /text >}}"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:269
msgid ""
"Check the statistics of the egress gateway’s proxy for the counter that "
"corresponds to your requests to \\_*.wikipedia.org_. If Istio is deployed"
" in the ``istio-system`` namespace, the command to print the counter is:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:277
msgid ""
"istio=egressgateway -n istio-system -o "
"jsonpath=‘{.items[0].metadata.name}’) -c istio-proxy -n istio-system – "
"pilot-agent request GET clusters \\| grep "
"’^outbound|443||www.wikipedia.org.*cx_total:’ "
"outbound|443||www.wikipedia.org::208.80.154.224:443::cx_total::2"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:284
msgid "Cleanup wildcard configuration for a single hosting server"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:289
msgid ""
"delete gateway istio-egressgateway $ kubectl delete virtualservice "
"direct-wikipedia-through-egress-gateway $ kubectl delete destinationrule "
"egressgateway-for-wikipedia"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:294
msgid "Wildcard configuration for arbitrary domains"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:296
msgid ""
"The configuration in the previous section worked because all the "
"\\_*.wikipedia.org\\_ sites can be served by any one of the "
"*wikipedia.org* servers. However, this is not always the case. For "
"example, you may want to configure egress control for access to more "
"general wildcard domains like ``*.com`` or ``*.org``."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:302
msgid ""
"Configuring traffic to arbitrary wildcard domains introduces a challenge "
"for Istio gateways. In the previous section you directed the traffic to "
"*www.wikipedia.org*, which was made known to your gateway during "
"configuration. The gateway, however, would not know the IP address of any"
" arbitrary host it receives in a request. This is due to a limitation of "
"`Envoy <https://www.envoyproxy.io>`_, the proxy used by the default Istio"
" egress gateway. Envoy routes traffic either to predefined hosts, "
"predefined IP addresses, or to the original destination IP address of the"
" request. In the gateway case, the original destination IP of the request"
" is lost since the request is first routed to the egress gateway and its "
"destination IP address is the IP address of the gateway."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:314
msgid ""
"Consequently, the Istio gateway based on Envoy cannot route traffic to an"
" arbitrary host that is not preconfigured, and therefore is unable to "
"perform traffic control for arbitrary wildcard domains. To enable such "
"traffic control for HTTPS, and for any TLS, you need to deploy an SNI "
"forward proxy in addition to Envoy. Envoy will route the requests "
"destined for a wildcard domain to the SNI forward proxy, which, in turn, "
"will forward the requests to the destination specified by the SNI value."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:322
msgid ""
"The egress gateway with SNI proxy and the related parts of the Istio "
"architecture are shown in the following diagram:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:330
msgid ""
"The following sections show you how to redeploy the egress gateway with "
"an SNI proxy and then configure Istio to route HTTPS traffic through the "
"gateway to arbitrary wildcard domains."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:335
msgid "Setup egress gateway with SNI proxy"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:337
msgid ""
"In this section you deploy an egress gateway with an SNI proxy in "
"addition to the standard Istio Envoy proxy. This example uses `Nginx "
"<http://nginx.org>`_ for the SNI proxy, although any SNI proxy that is "
"capable of routing traffic according to arbitrary, not-preconfigured, SNI"
" values would do. The SNI proxy will listen on port ``8443``, although "
"you can use any port other than the ports specified for the egress "
"``Gateway`` and for the ``VirtualServices`` bound to it. The SNI proxy "
"will forward the traffic to port ``443``."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:346
msgid ""
"Create a configuration file for the Nginx SNI proxy. You may want to edit"
" the file to specify additional Nginx settings, if required. Note that "
"the ``listen`` directive of the ``server`` specifies port ``8443``, its "
"``proxy_pass`` directive uses ``ssl_preread_server_name`` with port "
"``443`` and ``ssl_preread`` is ``on`` to enable ``SNI`` reading."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:357
msgid "events { }"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:359
msgid ""
"stream { log_format log_stream ‘$remote_addr [$time_local] $protocol "
"[$ssl_preread_server_name]’ ‘$status $bytes_sent $bytes_received "
"$session_time’;"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:363
msgid ""
"access_log /var/log/nginx/access.log log_stream; error_log "
"/var/log/nginx/error.log;"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:366
msgid ""
"# tcp forward proxy by SNI server { resolver 8.8.8.8 ipv6=off; listen "
"127.0.0.1:8443; proxy_pass $ssl_preread_server_name:443; ssl_preread on; "
"} } EOF"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:370
msgid ""
"Create a Kubernetes `ConfigMap <https://kubernetes.io/docs/tasks"
"/configure-pod-container/configure-pod-configmap/>`_ to hold the "
"configuration of the Nginx SNI proxy:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:377
msgid ""
"egress-sni-proxy-configmap -n istio-system –from-file=nginx.conf=./sni-"
"proxy.conf"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:380
msgid ""
"The following command will generate ``istio-egressgateway-with-sni-"
"proxy.yaml`` which you can optionally edit and then deploy."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:387
msgid ""
"values.global.istioNamespace=istio-system -f - > ./istio-egressgateway-"
"with-sni-proxy.yaml gateways: enabled: true istio-ingressgateway: "
"enabled: false istio-egressgateway: enabled: false istio-egressgateway-"
"with-sni-proxy: enabled: true labels: app: istio-egressgateway-with-sni-"
"proxy istio: egressgateway-with-sni-proxy replicaCount: 1 autoscaleMin: 1"
" autoscaleMax: 5 cpu: targetAverageUtilization: 80 serviceAnnotations: {}"
" type: ClusterIP ports: - port: 443 name: https secretVolumes: - name: "
"egressgateway-certs secretName: istio-egressgateway-certs mountPath: "
"/etc/istio/egressgateway-certs - name: egressgateway-ca-certs secretName:"
" istio-egressgateway-ca-certs mountPath: /etc/istio/egressgateway-ca-"
"certs configVolumes: - name: sni-proxy-config configMapName: egress-sni-"
"proxy-configmap additionalContainers: - name: sni-proxy image: nginx "
"volumeMounts: - name: sni-proxy-config mountPath: /etc/nginx readOnly: "
"true EOF"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:403
msgid "Deploy the new egress gateway:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:408
msgid ""
"./istio-egressgateway-with-sni-proxy.yaml serviceaccount “istio-"
"egressgateway-with-sni-proxy-service-account” created role “istio-"
"egressgateway-with-sni-proxy-istio-system” created rolebinding “istio-"
"egressgateway-with-sni-proxy-istio-system” created service “istio-"
"egressgateway-with-sni-proxy” created deployment “istio-egressgateway-"
"with-sni-proxy” created horizontalpodautoscaler “istio-egressgateway-"
"with-sni-proxy” created"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:416
msgid ""
"Verify that the new egress gateway is running. Note that the pod has two "
"containers (one is the Envoy proxy and the second one is the SNI proxy)."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:423
msgid ""
"istio=egressgateway-with-sni-proxy -n istio-system NAME READY STATUS "
"RESTARTS AGE istio-egressgateway-with-sni-proxy-79f6744569-pf9t2 2/2 "
"Running 0 17s"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:427
msgid ""
"Create a service entry with a static address equal to 127.0.0.1 "
"(``localhost``), and disable mutual TLS for traffic directed to the new "
"service entry:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:434
msgid ""
"networking.istio.io/v1alpha3 kind: ServiceEntry metadata: name: sni-proxy"
" spec: hosts:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:437
msgid "sni-proxy.local location: MESH_EXTERNAL ports:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:438
msgid "number: 8443 name: tcp protocol: TCP resolution: STATIC endpoints:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst
msgid "address: 127.0.0.1"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:442
msgid ""
"apiVersion: networking.istio.io/v1alpha3 kind: DestinationRule metadata: "
"name: disable-mtls-for-sni-proxy spec: host: sni-proxy.local "
"trafficPolicy: tls: mode: DISABLE EOF {{< /text >}}"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:448
msgid "Configure traffic through egress gateway with SNI proxy"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:450
msgid "Define a ``ServiceEntry`` for ``*.wikipedia.org``:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:459
msgid "number: 443 name: tls protocol: TLS EOF"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:461
msgid ""
"Create an egress ``Gateway`` for \\_*.wikipedia.org_, port 443, protocol "
"TLS, and a virtual service to direct the traffic destined for "
"\\_*.wikipedia.org\\_ through the gateway."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:465
msgid ""
"Choose the instructions corresponding to whether or not you want to "
"enable `mutual TLS Authentication </docs/tasks/security/authentication"
"/authn-policy/>`_ between the source pod and the egress gateway."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:472
msgid ""
"You may want to enable mutual TLS to let the egress gateway monitor the "
"identity of the source pods and to enable Mixer policy enforcement based "
"on that identity."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:476
msgid "{{< tabset category-name=“mtls” >}}"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:478
msgid "{{< tab name=“mutual TLS enabled” category-value=“enabled” >}}"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:483
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:555
msgid ""
"networking.istio.io/v1alpha3 kind: Gateway metadata: name: istio-"
"egressgateway-with-sni-proxy spec: selector: istio: egressgateway-with-"
"sni-proxy servers:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:487
msgid "port: number: 443 name: tls-egress protocol: TLS hosts:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:489
msgid ""
"\"*.wikipedia.org\" tls: mode: MUTUAL serverCertificate: /etc/certs/cert-"
"chain.pem privateKey: /etc/certs/key.pem caCertificates: /etc/certs/root-"
"cert.pem — apiVersion: networking.istio.io/v1alpha3 kind: DestinationRule"
" metadata: name: egressgateway-for-wikipedia spec: host: istio-"
"egressgateway-with-sni-proxy.istio-system.svc.cluster.local subsets:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:496
msgid ""
"name: wikipedia trafficPolicy: loadBalancer: simple: ROUND_ROBIN "
"portLevelSettings:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:499
msgid ""
"port: number: 443 tls: mode: ISTIO_MUTUAL — apiVersion: "
"networking.istio.io/v1alpha3 kind: VirtualService metadata: name: direct-"
"wikipedia-through-egress-gateway spec: hosts:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:505
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:575
msgid "istio-egressgateway-with-sni-proxy tls:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:513
msgid ""
"destination: host: istio-egressgateway-with-sni-proxy.istio-"
"system.svc.cluster.local subset: wikipedia port: number: 443 weight: 100 "
"tcp:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:521
msgid "istio-egressgateway-with-sni-proxy port: 443 route:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:523
msgid ""
"destination: host: sni-proxy.local port: number: 8443 weight: 100 — # The"
" following filter is used to forward the original SNI (sent by the "
"application) as the SNI of the mutual TLS # connection. # The forwarded "
"SNI will be reported to Mixer so that policies will be enforced based on "
"the original SNI value. apiVersion: networking.istio.io/v1alpha3 kind: "
"EnvoyFilter metadata: name: forward-downstream-sni spec: filters:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:531
msgid ""
"listenerMatch: portNumber: 443 listenerType: SIDECAR_OUTBOUND filterName:"
" forward_downstream_sni filterType: NETWORK filterConfig: {} — # The "
"following filter verifies that the SNI of the mutual TLS connection (the "
"SNI reported to Mixer) is # identical to the original SNI issued by the "
"application (the SNI used for routing by the SNI proxy). # The filter "
"prevents Mixer from being deceived by a malicious application: routing to"
" one SNI while # reporting some other value of SNI. If the original SNI "
"does not match the SNI of the mutual TLS connection, the # filter will "
"block the connection to the external service. apiVersion: "
"networking.istio.io/v1alpha3 kind: EnvoyFilter metadata: name: egress-"
"gateway-sni-verifier spec: workloadLabels: app: istio-egressgateway-with-"
"sni-proxy filters:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:544
msgid ""
"listenerMatch: portNumber: 443 listenerType: GATEWAY filterName: "
"sni_verifier filterType: NETWORK filterConfig: {} EOF {{< /text >}}"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:548
#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:597
msgid "{{< /tab >}}"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:550
msgid "{{< tab name=“mutual TLS disabled” category-value=“disabled” >}}"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:561
msgid ""
"\"*.wikipedia.org\" tls: mode: PASSTHROUGH — apiVersion: "
"networking.istio.io/v1alpha3 kind: DestinationRule metadata: name: "
"egressgateway-for-wikipedia spec: host: istio-egressgateway-with-sni-"
"proxy.istio-system.svc.cluster.local subsets:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:583
msgid ""
"destination: host: istio-egressgateway-with-sni-proxy.istio-"
"system.svc.cluster.local subset: wikipedia port: number: 443 weight: 100"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:591
msgid "istio-egressgateway-with-sni-proxy port: 443 sni_hosts:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:594
msgid "destination: host: sni-proxy.local port: number: 8443 weight: 100 EOF"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:599
msgid "{{< /tabset >}}"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:656
msgid ""
"Check the log of the egress gateway’s Envoy proxy. If Istio is deployed "
"in the ``istio-system`` namespace, the command to print the log is:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:663
msgid "istio=egressgateway-with-sni-proxy -c istio-proxy -n istio-system"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:665
msgid "You should see lines similar to the following:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:667
msgid ""
"{{< text plain >}} [2019-01-02T16:34:23.312Z] “- - -” 0 - 578 79141 624 -"
" “-” “-” “-” “-” “127.0.0.1:8443” outbound|8443||sni-proxy.local "
"127.0.0.1:55018 172.30.109.84:443 172.30.109.112:45346 en.wikipedia.org "
"[2019-01-02T16:34:24.079Z] “- - -” 0 - 586 65770 638 - “-” “-” “-” “-” "
"“127.0.0.1:8443” outbound|8443||sni-proxy.local 127.0.0.1:55034 "
"172.30.109.84:443 172.30.109.112:45362 de.wikipedia.org"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:675
msgid ""
"Check the logs of the SNI proxy. If Istio is deployed in the ``istio-"
"system`` namespace, the command to print the log is:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:681
msgid ""
"istio=egressgateway-with-sni-proxy -n istio-system -c sni-proxy 127.0.0.1"
" [01/Aug/2018:15:32:02 +0000] TCP [en.wikipedia.org]200 81513 280 0.600 "
"127.0.0.1 [01/Aug/2018:15:32:03 +0000] TCP [de.wikipedia.org]200 67745 "
"291 0.659"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:686
msgid ""
"Check the mixer log. If Istio is deployed in the ``istio-system`` "
"namespace, the command to print the log is:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:692
msgid ""
"istio-mixer-type=telemetry -c mixer \\| grep ‘“connectionEvent”:“open”’ "
"\\| grep ’“sourceName”:“istio-egressgateway’ \\| grep ‘wikipedia.org’ "
"{”level“:”info“,”time“:”2018-08-26T16:16:34.784571Z“,”instance“:”tcpaccesslog.logentry"
".istio-"
"system“,”connectionDuration“:”0s“,”connectionEvent“:”open“,”connection_security_policy“:”unknown“,”destinationApp“:”“,”destinationIp“:”127.0.0.1“,”destinationName“:”unknown“,”destinationNamespace“:”default“,”destinationOwner“:”unknown“,”destinationPrincipal“:”cluster.local/ns"
"/istio-system/sa/istio-egressgateway-with-sni-proxy-service-"
"account“,”destinationServiceHost“:”“,”destinationWorkload“:”unknown“,”protocol“:”tcp“,”receivedBytes“:298,”reporter“:”source“,”requestedServerName“:”en.wikipedia.org“,”sentBytes“:0,”sourceApp"
"“:”istio-egressgateway-with-sni-"
"proxy“,”sourceIp“:”172.30.146.88“,”sourceName“:”istio-egressgateway-with-"
"sni-proxy-7c4f7868fb-rc8pr“,”sourceNamespace“:”istio-"
"system“,”sourceOwner“:”kubernetes://apis/extensions/v1beta1/namespaces"
"/istio-system/deployments/istio-egressgateway-with-sni-"
"proxy“,”sourcePrincipal“:”cluster.local/ns/sleep/sa/default“,”sourceWorkload"
"“:”istio-egressgateway-with-sni-"
"proxy“,”totalReceivedBytes“:298,”totalSentBytes\":0}"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:698
msgid "Note the ``requestedServerName`` attribute."
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:701
msgid "Cleanup wildcard configuration for arbitrary domains"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:703
msgid "Delete the configuration items for \\_*.wikipedia.org_:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:708
msgid ""
"delete gateway istio-egressgateway-with-sni-proxy $ kubectl delete "
"virtualservice direct-wikipedia-through-egress-gateway $ kubectl delete "
"destinationrule egressgateway-for-wikipedia $ kubectl delete –ignore-not-"
"found=true envoyfilter forward-downstream-sni egress-gateway-sni-verifier"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:714
msgid ""
"Delete the configuration items for the ``egressgateway-with-sni-proxy`` "
"deployment:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:720
msgid ""
"delete destinationrule disable-mtls-for-sni-proxy $ kubectl delete -f "
"./istio-egressgateway-with-sni-proxy.yaml $ kubectl delete configmap "
"egress-sni-proxy-configmap -n istio-system"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:724
msgid "Remove the configuration files you created:"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:729
msgid "./sni-proxy.conf"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:732
msgid "Cleanup"
msgstr ""

#: ../../source/docs/tasks/traffic-management/egress/wildcard-egress-hosts/index.rst:734
#, python-format
msgid ""
"Shutdown the `sleep <%7B%7B%3C%20github_tree%20%3E%7D%7D/samples/sleep>`_"
" service:"
msgstr ""

