# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2020, BandCamp
# This file is distributed under the same license as the istio-docs package.
# FIRST AUTHOR <EMAIL@ADDRESS>, 2020.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: istio-docs \n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2020-03-22 10:08+0800\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Generated-By: Babel 2.7.0\n"

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:2
msgid "auth-sds"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:4
msgid ""
"This task shows how to enable `SDS (secret discovery service) "
"<https://www.envoyproxy.io/docs/envoy/latest/configuration/security/secret"
"#sds-configuration>`_ for Istio identity provisioning."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:8
msgid ""
"By default, the keys and certificates of Istio workloads are generated by"
" Citadel and distributed to sidecars through secret-volume mounted files."
" This approach has the following minor drawbacks:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:12
msgid ""
"Performance regression during certificate rotation: When certificate "
"rotation happens, Envoy is hot restarted to pick up the new key and "
"certificate, causing performance regression."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:16
msgid ""
"Potential security vulnerability: The workload private keys are "
"distributed through Kubernetes secrets, with known `risks "
"<https://kubernetes.io/docs/concepts/configuration/secret/#risks>`_."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:20
msgid ""
"These issues can be addressed by enabling the SDS identity provision "
"flow. This workflow can be described as follows:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:23
msgid ""
"The workload sidecar Envoy requests the key and certificates from the "
"Istio Agent: Istio Agent is the SDS server. In the request, Envoy passes "
"a Kubernetes service account JWT to the agent."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:27
msgid ""
"Istio Agent generates a key pair and sends the CSR request to Citadel: "
"Citadel verifies the JWT and issues the certificate to the Istio Agent."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:31
msgid "Istio Agent sends the key and certificate back to the workload sidecar."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:34
msgid "The SDS approach has the following benefits:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:36
msgid ""
"The private key never leaves the container: It is only in the Istio Agent"
" and Envoy sidecar’s memory."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:39
msgid ""
"The secret volume mount is no longer needed: The reliance on the "
"Kubernetes secrets is eliminated."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:42
msgid ""
"The sidecar Envoy is able to dynamically renew the key and certificate "
"through the SDS API: Certificate rotations no longer require Envoy to "
"restart."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:47
msgid "Before you begin"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:49
msgid ""
"Follow the `Istio installation guide </docs/setup/install/istioctl/>`_ to"
" set up Istio with the SDS profile."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:53
msgid ""
"Service-to-service mutual TLS using key/certificate provisioned through "
"SDS"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:55
msgid ""
"Follow the `authentication policy task "
"</docs/tasks/security/authentication/authn-policy/>`_ to setup test "
"services."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:62
msgid ""
"kube-inject -f @samples/httpbin/httpbin.yaml@) -n foo $ kubectl apply -f "
"<(istioctl kube-inject -f @samples/sleep/sleep.yaml@) -n foo $ kubectl "
"create ns bar $ kubectl apply -f <(istioctl kube-inject -f "
"@samples/httpbin/httpbin.yaml@) -n bar $ kubectl apply -f <(istioctl "
"kube-inject -f @samples/sleep/sleep.yaml@) -n bar"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:68
msgid "Verify all mutual TLS requests succeed:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:73
msgid ""
"do kubectl exec $(kubectl get pod -l app=sleep -n ${from} -o "
"jsonpath={.items..metadata.name}) -c sleep -n :math:`{from} -- curl "
"\"http://httpbin.`\\ {to}:8000/ip\" -s -o /dev/null -w “sleep.\\ "
":math:`{from} to httpbin.`\\ {to}: %{http_code}:raw-latex:`\\n`”; done; "
"done sleep.foo to httpbin.foo: 200 sleep.foo to httpbin.bar: 200 "
"sleep.bar to httpbin.foo: 200 sleep.bar to httpbin.bar: 200"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:82
msgid "Verifying no secret-volume mounted file is generated"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:84
msgid ""
"To verify that no secret-volume mounted file is generated, access the "
"deployed workload sidecar container:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:90
msgid "foo -o jsonpath={.items..metadata.name}) -c istio-proxy -n foo – /bin/bash"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:93
msgid "As you can see there is no secret file mounted at ``/etc/certs`` folder."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:96
msgid "Cleanup"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:98
msgid "Clean up the test services and the Istio control plane:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:103
msgid "kubectl delete -f istio-auth-sds.yaml"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:106
msgid "Caveats"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:108
msgid "Currently, the SDS identity provision flow has the following caveats:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:110
msgid ""
"SDS support is currently in `Alpha </about/feature-stages/#security-and-"
"policy-enforcement>`_."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/auth-sds/index.rst:113
msgid ""
"Smoothly migrating a cluster from using secret volume mount to using SDS "
"is a work in progress."
msgstr ""

