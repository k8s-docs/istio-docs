# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2020, BandCamp
# This file is distributed under the same license as the istio-docs package.
# FIRST AUTHOR <EMAIL@ADDRESS>, 2020.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: istio-docs \n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2020-03-22 10:08+0800\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Generated-By: Babel 2.7.0\n"

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:2
msgid "plugin-ca-cert"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:4
msgid ""
"This task shows how operators can configure Citadel with existing root "
"certificate, signing certificate and key."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:7
msgid ""
"By default, Citadel generates self-signed root certificate and key, and "
"uses them to sign the workload certificates. Citadel can also use the "
"operator-specified certificate and key to sign workload certificates, "
"with operator-specified root certificate. This task demonstrates an "
"example to plug certificates and key into Citadel."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:14
msgid "Before you begin"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:16
msgid ""
"Follow the `Istio installation guide </docs/setup/install/istioctl/>`_ to"
" install Istio."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:19
msgid ""
"**Optional:** Enable mutual TLS in ``STRICT`` mode as show in the "
"`authentication policy task </docs/tasks/security/authentication/authn-"
"policy/#globally-enabling-istio-mutual-tls-in-strict-mode>`_. The default"
" ``PERMISSIVE`` mode already supports mutual TLS traffic."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:25
msgid "Plugging in the existing certificate and key"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:27
msgid ""
"Suppose we want to have Citadel use the existing signing (CA) certificate"
" ``ca-cert.pem`` and key ``ca-key.pem``. Furthermore, the certificate "
"``ca-cert.pem`` is signed by the root certificate ``root-cert.pem``. We "
"would like to use ``root-cert.pem`` as the root certificate for Istio "
"workloads."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:33
msgid ""
"In the following example, Citadel’s signing (CA) certificate (``ca-"
"cert.pem``) is different from root certificate (``root-cert.pem``), so "
"the workload cannot validate the workload certificates directly from the "
"root certificate. The workload needs a ``cert-chain.pem`` file to specify"
" the chain of trust, which should include the certificates of all the "
"intermediate CAs between the workloads and the root CA. In our example, "
"it contains Citadel’s signing certificate, so ``cert-chain.pem`` is the "
"same as ``ca-cert.pem``. Note that if your ``ca-cert.pem`` is the same as"
" ``root-cert.pem``, the ``cert-chain.pem`` file should be empty."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:44
msgid "These files are ready to use in the ``samples/certs/`` directory."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:48
msgid "The default Citadel installation sets `command line"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:49
msgid ""
"options </docs/reference/commands/istio_ca/index.html>`_ to configure the"
" location of certificates and keys based on the predefined secret and "
"file names used in the command below (i.e., secret named ``cacert``, root"
" certificate in a file named ``root-cert.pem``, Citadel key in ``ca-"
"key.pem``, etc.) You must use these specific secret and file names, or "
"reconfigure Citadel when you deploy it."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:56
msgid ""
"The following steps enable plugging in the certificates and key into "
"Citadel:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:59
msgid ""
"Create a secret ``cacert`` including all the input files ``ca-cert.pem``,"
" ``ca-key.pem``, ``root-cert.pem`` and ``cert-chain.pem``:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst
msgid ".. code:: sh"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:65
msgid "$ kubectl create secret generic cacerts -n"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:66
msgid "istio-system –from-file=samples/certs/ca-cert.pem"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst
msgid "–from-file=samples/certs/ca-key.pem –from-file=samples/certs/root-cert.pem"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst
msgid "–from-file=samples/certs/cert-chain.pem"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:71
msgid ""
"Redeploy Citadel with ``security.selfSigned``\\ set to ``false``. Citadel"
" will read certificates and key from the secret-mount files."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:77
msgid "values.security.selfSigned=false"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:79
msgid ""
"To make sure the workloads obtain the new certificates promptly, delete "
"the secrets generated by Citadel (named as ``istio.\\*``). In this "
"example, ``istio.default``. Citadel will issue new certificates for the "
"workloads."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:89
msgid "Verifying the new certificates"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:91
msgid ""
"In this section, we verify that the new workload certificates and root "
"certificates are propagated. This requires you have ``openssl`` installed"
" on your machine."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:95
msgid ""
"Deploy the Bookinfo application following the `instructions "
"</docs/examples/bookinfo/>`_."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:98
msgid ""
"Retrieve the mounted certificates. In the following, we take the ratings "
"pod as an example, and verify the certificates mounted on the pod."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:102
msgid "Set the pod name to ``RATINGSPOD``:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:107
msgid ""
"RATINGSPOD=\\ ``kubectl get pods -l app=ratings -o "
"jsonpath='{.items[0].metadata.name}'``"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:110
msgid ""
"Run the following commands to retrieve the certificates mounted on the "
"proxy:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:116
msgid "/bin/cat /etc/certs/root-cert.pem > /tmp/pod-root-cert.pem {{< /text >}}"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:119
msgid ""
"The file ``/tmp/pod-root-cert.pem`` contains the root certificate "
"propagated to the pod."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:125
msgid "/bin/cat /etc/certs/cert-chain.pem > /tmp/pod-cert-chain.pem"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:127
msgid ""
"The file ``/tmp/pod-cert-chain.pem`` contains the workload certificate "
"and the CA certificate propagated to the pod."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:130
msgid "Verify the root certificate is the same as the one specified by operator:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:136
msgid ""
"-text -noout > /tmp/root-cert.crt.txt $ openssl x509 -in /tmp/pod-root-"
"cert.pem -text -noout > /tmp/pod-root-cert.crt.txt $ diff /tmp/root-"
"cert.crt.txt /tmp/pod-root-cert.crt.txt"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:140
#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:154
msgid "Expect the output to be empty."
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:142
msgid "Verify the CA certificate is the same as the one specified by operator:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:148
msgid ""
"/tmp/pod-cert-chain.pem > /tmp/pod-cert-chain-ca.pem $ openssl x509 -in "
"@samples/certs/ca-cert.pem@ -text -noout > /tmp/ca-cert.crt.txt $ openssl"
" x509 -in /tmp/pod-cert-chain-ca.pem -text -noout > /tmp/pod-cert-chain-"
"ca.crt.txt $ diff /tmp/ca-cert.crt.txt /tmp/pod-cert-chain-ca.crt.txt"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:156
msgid ""
"Verify the certificate chain from the root certificate to the workload "
"certificate:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:162
msgid ""
"/tmp/pod-cert-chain-workload.pem $ openssl verify -CAfile <(cat "
"@samples/certs/ca-cert.pem@ @samples/certs/root-cert.pem@) /tmp/pod-cert-"
"chain-workload.pem /tmp/pod-cert-chain-workload.pem: OK"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:168
msgid "Cleanup"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:170
msgid ""
"To remove the secret ``cacerts`` and redeploy Citadel with self-signed "
"root certificate:"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:176
msgid "istioctl manifest apply"
msgstr ""

#: ../../source/docs/tasks/security/citadel-config/plugin-ca-cert/index.rst:178
msgid ""
"To remove the Istio components: follow the `uninstall instructions "
"</docs/setup/getting-started/#uninstall>`_ to remove."
msgstr ""

